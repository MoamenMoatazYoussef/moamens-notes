Webpack:
========
Webpack takes modules and JS code files and generates static files that can be uploaded to your server.

Properties:
- Code splitting: splitting the static files into chunks that can be lazy-loaded.
- Loaders: which make webpack able to work on other stuff than JS e.g. JSX, sass, css, etc.
- Plugins: to extend webpack's functionality.

How webpack works:
- Webpack reads the entry point, then it
- Analyzes its dependencies, and their dependencies, and so on, then
- Webpack bundles the entry point and all of the dependencies in ONE SINGLE FILE, this is the file that will be included in our html's <script/> tag.

Getting started:
- npm install webpack
- npm install webpack-dev-server (for live server loading)
- Create a folder.
- Open cmd in the folder.
- npm init.
- Create index.html, put any html in it but include this:
``` html
<script src="bundle.js"></script>
```
- Create app.js, put any code in it that will generate a visible output e.g. console.log, alert, or change the text of a <p/> or <span/> element you have in index.html.
- Go back to the cmd, write the command in the format (webpack src-file destination-file)
	>> webpack app.js bundle.js
- Open the bundle.js, you'll see the code generated by webpack, at its bottom you'll see the app.js code.
- Open the index.html page in a browser (i.e. double click it), see the visible output that should be generated :)
- Add another file people.js:
``` js
module.exports = "this is a string";
```
- Go to app.js, write this:
``` js
const theString = require("./people.js");

// in your code that outputs something, output theString instead of a static string
```
- Run webpack again and refresh your page, see the new output :)
- Run webpack again but add this at the end of the command "--watch".
- Now webpack will automatically run whenever we change any file and save it :)

Loaders: these are sort of plugins that enable webpack to work with different file types.

Let's use a loader:
- Add a .css file in your project and write some css in it like:
``` css
body: {
	background-color: red;
}
```
- Refresh the page, no change will happen...
We need css loaders to enable webpack to work with css.
- Go to the cmd:
	>> npm install -D css-loader style-loader
- Go to app.js:
``` js
// this includes the style.css file, but also
// it tells webpack that we want to use style-loader and css-loader
// with this file we're requiring.
require("!style-loader!css-loader!./style.css");

// the rest of the code
```
- Now refresh the page, css will take effect.

But, instead of this ugly syntax we used, we'll use webpack's config file.
- Create webpack.config.js
``` js
// here we'll write our properties for configuration
module.exports = {
	// entry: which file will webpack start from
	entry: './app.js',
	
	// where to put the output static file, what to name it, and more properties
	output: {
		path: __dirname,
		filename: 'bundle.js'
	},
	
	// here we define the loaders
	module: {
	
		// which loaders will we use
		loaders: [
			// each loader is an object with properties defining it and how it works
			{
				// test is a regex used to select which files to apply this loader on
				test: /\.css$/,
				
				// this is the actual loader
				loader: "style-loader!css-loader"
			}
		]
	}
}
```
- Go back to app.js, change the require to:
``` js
require("./style.css");
```
- Notice that we defined the src and destination files in webpack.config.js, so now we can run the command:
	>> webpack
	- without specifying any arguments :)
- Refresh the page and check the output :)

Let's try to make a better folder structure:
- Create this structure:
	= root folder
		= src
			= js
				=> app.js
				=> people.js
			= css
				=> style.css
- Delete bundle.js
- In webpack.config.js, modify the entry property.
- In webpack.config.js, change the path of the output to __dirname + "./dist"
- Update app.js and any other files for paths if needed.
- In package.json, add this script:
``` json
"scripts": {
	"build": "webpack"
}
```
- Update the index.html to read the bundle.js from the new path.
- >> npm run build
- Refresh the page :)

- Also, try this:
	>> npm install webpack-dev-server -D
- Add this script to package.json:
``` json
"start": "webpack-dev-server --entry ./src/js/app.js --output-filename ./dist/bundle.js"
```
- Close the browser.
- >> npm start
- In the cmd, it will specify which port and host it started, most probably localhost:8080 or similar with different port.
- Open this in a browser, you'll see the page :)

Trying babel loader to compile the code to es5:
- >> npm install babel-core npm-loader babel-preset-es2015
- webpack.config.js, add this loader:
``` js
module.exports = {

	// rest of the file
	
	module: {
		loaders: [
		// previous loaders
			{
				test: /\.js$/,
				loader: 'babel-loader',
				
				// which files to NOT apply this loader on
				exclude: /node_modules/,
				
				// which presets to use with this loader
				query: { 
					presets: ['es2015'] 
				}
			}
		]
	}
}
```
- Go to app.js, write anything that's es6 (e.g. arrow function, let keyword, etc.)
- >> npm run build
- Go to bundle.js, search for the es5 code that matches the same es6 code you wrote (search by a variable name or whatever, don't read the whole bundle.js!)
- >> npm start
- :)

